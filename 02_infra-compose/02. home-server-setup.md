## âš™ï¸ í™ˆì„œë²„ êµ¬ì¶• ê¸°ì´ˆ ì •ë¦¬

---
### âœ… ê¸°ë³¸ ì„¤ì •
- `/opt`ëŠ” ìš´ì˜ìš© ì„œë¹„ìŠ¤ ë°°í¬ í´ë”ë¡œ ì‚¬ìš© (ê³µì‹ í‘œì¤€)
- Git, Vim, Tmux, Docker CLI ë“±ì„ ì„œë²„ì— ë¯¸ë¦¬ ì„¤ì¹˜í•´ë‘ë©´ ìœ ìš©
- ì‹¤ì œ ìš´ì˜ ì „ì´ë¼ë©´ ë¡œì»¬ì—ì„œ Docker í™˜ê²½ ìµœëŒ€í•œ ë˜‘ê°™ì´ ë§ì¶°ì„œ í…ŒìŠ¤íŠ¸
- ê³µì¸ IP ì§ì ‘ í• ë‹¹ ê°€ëŠ¥í•˜ì§€ë§Œ, ê³µìœ ê¸° ì‚¬ìš©ìœ¼ë¡œ í¬íŠ¸í¬ì›Œë”© ê°€ëŠ¥

### âœ… ì„œë²„ ì‚¬ì–‘ ë° ìš´ì˜ í™˜ê²½

- **ìš´ì˜ ì²´ì œ**: Ubuntu 24.04.2 LTS (64bit)
- **ì„œë²„ ì¢…ë¥˜**: ìíƒ ì„¤ì¹˜í˜• í™ˆì„œë²„ (ë…¸íŠ¸ë¶ ë¦¬ì‚¬ì´í´ë§)
- **CPU**: Intel(R) Celeron(R) N4100 CPU @ 1.10GHz
- **RAM**: 4GB DDR4
- **ì €ì¥ì¥ì¹˜**: 256GB SSD ()
- **ë„ì»¤ ì—”ì§„**: Docker 28.0.4, Docker Compose v2.34.0
- **ë°°í¬ ìœ„ì¹˜**: ìíƒ í™ˆì„œë²„ (ê³µìœ ê¸° ë‚´ë¶€ IP + DDNS ì‚¬ìš©)
- **ë„ë©”ì¸ êµ¬ì„±**:  `portfolio.arami.com`,`core.arami.com`,`test.arami.com` 
- **ë„¤íŠ¸ì›Œí¬ í™˜ê²½**: ìœ ì„  ê³ ì • IP / í¬íŠ¸í¬ì›Œë”© ì„¤ì •
  - **ë„¤íŠ¸ì›Œí¬ êµ¬ì„±**:
  - ê³µìœ ê¸° í¬íŠ¸í¬ì›Œë”© (80, 443 )
  - í”„ë¡ì‹œ ì„œë²„ë¡œ Nginx í™œìš©

---

## ğŸ“ ë„¤íŠ¸ì›Œí¬ ì„¤ê³„

### â–¶ ê³µìœ ê¸° ë’¤ì— ë‘˜ ê²ƒì¸ê°€?
| í•­ëª© | ì§ì ‘ ê³µì¸ IP ì‚¬ìš© | ê³µìœ ê¸° ì‚¬ìš© |
|------|-------------------|-------------|
| ì ‘ê·¼ í¸ì˜ | ì‰¬ì›€ | í¬íŠ¸í¬ì›Œë”© í•„ìš” |
| ë³´ì•ˆ | ë§¤ìš° ìœ„í—˜ | NATë¡œ 1ì°¨ ë³´í˜¸ |
| í™•ì¥ì„± | ì œí•œì  (ê³µì¸ IP ê°¯ìˆ˜ ì œí•œ) | ë‹¤ìˆ˜ ì„œë²„ ìš´ì˜ ê°€ëŠ¥ |
**ê³µìœ ê¸° â†’ í™ˆì„œë²„ (ì‚¬ì„¤ IP + í¬íŠ¸í¬ì›Œë”©)**

---

## ğŸ” ë³´ì•ˆ ì„¤ì •

### â–¶ `UFW` ë°©í™”ë²½ ì„¤ì •

```bash
sudo apt update && sudo apt install ufw
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22       # SSH í¬íŠ¸
sudo ufw allow 80       # HTTP
sudo ufw allow 443      # HTTPS
sudo ufw enable
```

### â–¶ `fail2ban` ì„¤ì¹˜ (SSH ë¬´ì°¨ë³„ ê³µê²© ë°©ì§€)

```bash
sudo apt install fail2ban
sudo systemctl enable --now fail2ban
```

---

## ğŸ³ Docker ê¸°ë°˜ êµ¬ì„±

### â–¶ êµ¬ì„± ìš”ì†Œ

| ì„œë¹„ìŠ¤          | ì„¤ëª…                |
|--------------|-------------------|
| Nginx        | Reverse Proxy     |
| Backend      | NestJS            |
| Frontend     | React             |
| MySQL        | ê´€ê³„í˜• DB            |
| PostgreSQL   | ë˜ ë‹¤ë¥¸ RDB          |
| Storage      | MinIO             |
| Backend-dev  | NestJS - ë°°í¬ ì „ í…ŒìŠ¤íŠ¸ |
| Frontend-dev | React - ë°°í¬ ì „ í…ŒìŠ¤íŠ¸  |

### â–¶ í´ë” êµ¬ì¡° ì˜ˆì‹œ

```plaintext
/opt/home-server/
â”œâ”€â”€ nginx/
â”‚   â”œâ”€â”€ conf.d/
â”‚   â”‚   â””â”€â”€domain.conf/ #niginx ì„¤ì •íŒŒì¼ ì €ì¥ volumes
â”‚   â””â”€â”€ certbot/
â”‚       â””â”€â”€conf/ # ì¸ì¦ì„œ ì €ì¥ volumes
â”œâ”€â”€ backend/
â”œâ”€â”€ frontend/
â”œâ”€â”€ mysql/
â”‚   â”œâ”€â”€ mysqldump
â”‚   â””â”€â”€ data/ # DB data ì €ì¥ volumes
â”œâ”€â”€ postgresql/
â”‚   â”œâ”€â”€ pg_dump
â”‚   â””â”€â”€ data/ # DB data ì €ì¥ volumes
â”œâ”€â”€ storage/
â”‚   â””â”€â”€ data/ # storage data ì €ì¥ volumes
â”œâ”€â”€ .env # docker secret setting data
â””â”€â”€ docker-compose.yml (ì „ì²´ í†µí•©)
```



---

## ğŸ“¦ ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

- `docker-compose` í™˜ê²½ íŒŒì¼ ìƒì„±
- nginx + frontend + backend ì˜ˆì œ êµ¬ì„±ë¶€í„° ì‹œì‘
- í•„ìš”ì‹œ ì „ì²´ í†µí•© `docker-compose.yml` ì œê³µ ê°€ëŠ¥
---

## ğŸ§© ì˜ˆì‹œ: Docker Compose í…œí”Œë¦¿ + í´ë” êµ¬ì¡°

### ğŸ“ ê¸°ë³¸ í´ë” êµ¬ì¡°

```plaintext
/opt/home-server/
â”œâ”€â”€ nginx/
â”‚   â”œâ”€â”€ conf.d/
â”‚   â”‚   â””â”€â”€ default.conf
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ mysql/
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ postgresql/
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ storage/
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â””â”€â”€ docker-compose.yml (ì „ì²´ í†µí•© êµ¬ì„±)
```

---

### ğŸ“¦ ì „ì²´ í†µí•© docker-compose.yml ì˜ˆì‹œ

```yaml
version: '3.8'

services:
  nginx:
    image: nginx:latest
    volumes:
      - ./nginx/conf.d:/etc/nginx/conf.d
      - ./frontend/dist:/usr/share/nginx/html
    networks:
      - app-net
  backend:
    networks:
      - app-net
  frontend:
    networks:
      - app-net
  mysql:
    image: mysql:8.0
    networks:
      - app-net
  postgresql:
    image: postgres:15
    volumes:
      - pg_data:/var/lib/postgresql/data
    networks:
      - app-net
  storage:
    image: minio/minio
    volumes:
      - minio_data:/data
    networks:
      - app-net
networks:
  app-net:
```

---

### ğŸ’¡ ì´ í…œí”Œë¦¿ìœ¼ë¡œ ê°€ëŠ¥í•œ ê²ƒë“¤
- Nginxë¥¼ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì‚¬ìš©
- NestJS ë˜ëŠ” FastAPI ë“± ë°±ì—”ë“œ ì„œë²„ì™€ ì—°ê²°
- React í”„ë¡ íŠ¸ì—”ë“œ ì •ì  íŒŒì¼ ì œê³µ
- MySQLê³¼ PostgreSQLì„ ë™ì‹œì— ìš´ì˜
- MinIOë¡œ íŒŒì¼ ì €ì¥ (ë¡œì»¬ S3ì²˜ëŸ¼ ì‚¬ìš©)
ì´ì œ ì´ êµ¬ì¡°ë¡œ í™ˆì„œë²„ì— í•„ìš”í•œ ê±°ì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ ìœ ê¸°ì ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ìˆë‹¤.
